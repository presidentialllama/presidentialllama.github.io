<!DOCTYPE html>

<html lang="en">
    <head>
        <title>ClubMeNow - Club Entry</title>
        <link rel="icon" href="../images/clubMeNow300x300.png" type="image/png" />
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css" />
        <!-- ClubMeNow custom CSS -->
        <link rel="stylesheet" href="clubMeNow.css" />
    </head>

    <body>
        <div class="container">
            <h1>Add Club</h1>
            <form action="clubDistanceList.html">
                <div class="form-group">
                    <label for="clubName"></label>
                    <input
                        name="clubName"
                        id="clubName"
                        type="text"
                        class="form-control cmn_moreHeight"
                        placeholder="Driver"
                        required
                    /><br />
                    <button class="btn btn-success cmn_fullHeight" onclick="addClub();">&nbsp;&nbsp;&#x2714;&nbsp;&nbsp;</button>
                    <button class="btn btn-danger cmn_fullHeight" onclick="cancelClub();">&nbsp;&nbsp;X&nbsp;&nbsp;</button>
                    <br />
                    <br />
                </div>
            </form>

            <br />
            <footer>Copyright &copy;2020 George Corser</footer>
        </div>

        <!-- ClubMeNow custom JS -->
        <script src="clubMeNow.js"></script>
        <script>
            // retrieve the row of the user-chosen club
            let clubRow = parseInt(localStorage.getItem("club"));
            // retrieve the "clubs" array
            let clubs = JSON.parse(localStorage.getItem("clubs"));
            // display the full clubName of the user-chosen club
            let newClubName;
            let newClubDistances;

            function addClub() {
                // warning message
                if (clubs.length >= 14) {
                    alert("Warning: you are only allowed to carry 14 clubs in your golf bag in match play competition.");
                }

                let newSortPosition = clubs[clubs.length - 1][0] + 100;
                let newClubName = document.getElementById("clubName").value;

                clubs.push([newSortPosition, "", newClubName, 0, 0, 0, 0, 0, 0, 0]);

                // save updated stats in local storage
                let str = JSON.stringify(clubs);
                localStorage.setItem("clubs", str);
                // return to list screen
                window.location.href = "clubDistanceList.html";

                // override "Undo" functionality
                str = JSON.stringify(clubs);
                localStorage.setItem("clubsUndo", str);
            }

            // navigate to club distance LIST screen
            function cancelClub() {
                window.location.href = "clubDistanceList.html";
            }
        </script>
    </body>
</html>
